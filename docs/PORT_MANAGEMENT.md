# ç«¯å£ç®¡ç†æŒ‡å—

## ğŸ¯ **è§£å†³ç«¯å£å˜åŒ–é—®é¢˜çš„å®Œæ•´æ–¹æ¡ˆ**

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é˜²æ­¢å’Œè§£å†³ç«¯å£å˜åŒ–å¯¼è‡´çš„é…ç½®é—®é¢˜ã€‚

## ğŸ“‹ **é—®é¢˜èƒŒæ™¯**

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç«¯å£å˜åŒ–ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š
- å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯API
- å¤´åƒå’Œé™æ€èµ„æºåŠ è½½å¤±è´¥
- å¼€å‘ç¯å¢ƒé…ç½®ä¸ä¸€è‡´
- éƒ¨ç½²æ—¶ç«¯å£å†²çª

## ğŸ”§ **è§£å†³æ–¹æ¡ˆæ¶æ„**

### **1. ç»Ÿä¸€é…ç½®ç®¡ç†**
```
frontend/src/config/index.js  # ç»Ÿä¸€é…ç½®æ–‡ä»¶
â”œâ”€â”€ å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ æµ‹è¯•ç¯å¢ƒé…ç½®
â””â”€â”€ åŠ¨æ€ç«¯å£æ£€æµ‹
```

### **2. è‡ªåŠ¨åŒ–è„šæœ¬**
```
scripts/
â”œâ”€â”€ detect-port.js     # ç«¯å£æ£€æµ‹è„šæœ¬
â”œâ”€â”€ start-dev.js       # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â””â”€â”€ check-config.js    # é…ç½®æ£€æŸ¥è„šæœ¬
```

### **3. å¥åº·æ£€æŸ¥æœºåˆ¶**
```
åç«¯API: /health       # å¥åº·æ£€æŸ¥ç«¯ç‚¹
å‰ç«¯é…ç½®: è‡ªåŠ¨æ£€æµ‹      # åŠ¨æ€ç«¯å£å‘ç°
```

## ğŸš€ **ä½¿ç”¨æ–¹æ³•**

### **å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰**
```bash
# è‡ªåŠ¨æ£€æµ‹ç«¯å£å¹¶å¯åŠ¨å‰åç«¯æœåŠ¡
npm run dev
```

### **æ‰‹åŠ¨ç«¯å£æ£€æµ‹**
```bash
# æ£€æµ‹å½“å‰è¿è¡Œçš„APIç«¯å£
npm run detect-port
```

### **é…ç½®æ£€æŸ¥**
```bash
# æ£€æŸ¥é¡¹ç›®é…ç½®å®Œæ•´æ€§
node scripts/check-config.js
```

### **åˆ†åˆ«å¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨åç«¯
npm run start:backend

# å¯åŠ¨å‰ç«¯
npm run start:frontend
```

## ğŸ“ **é…ç½®æ–‡ä»¶è¯´æ˜**

### **ç¯å¢ƒå˜é‡é…ç½®**
```env
# frontend/.env.development
VITE_API_BASE_URL=http://localhost:9000
VITE_WS_BASE_URL=ws://localhost:9000
VITE_APP_TITLE=åšå®¢è®ºå›
VITE_APP_VERSION=1.0.0
```

### **åº”ç”¨é…ç½®**
```javascript
// frontend/src/config/index.js
export const config = {
  API_BASE_URL: 'http://localhost:9000',
  WS_BASE_URL: 'ws://localhost:9000',
  // ... å…¶ä»–é…ç½®
}
```

### **ä»£ç†é…ç½®**
```javascript
// frontend/vite.config.js
server: {
  proxy: {
    "/api": {
      target: "http://localhost:9000",
      changeOrigin: true,
    },
  },
}
```

## ğŸ” **ç«¯å£æ£€æµ‹æœºåˆ¶**

### **è‡ªåŠ¨æ£€æµ‹æµç¨‹**
1. æ£€æŸ¥å¸¸ç”¨ç«¯å£ï¼š9000, 8000, 8001, 8080
2. è°ƒç”¨å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼š`/health`
3. æ›´æ–°å‰ç«¯é…ç½®æ–‡ä»¶
4. é‡å¯å¼€å‘æœåŠ¡å™¨

### **å¥åº·æ£€æŸ¥ç«¯ç‚¹**
```json
GET /health
{
  "status": "healthy",
  "service": "åšå®¢è®ºå› API",
  "version": "1.0.0",
  "timestamp": "2025-06-18T16:41:17.959653",
  "port": 9000
}
```

## ğŸ› ï¸ **æ•…éšœæ’é™¤**

### **ç«¯å£è¢«å ç”¨**
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :9000

# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F

# æˆ–ä½¿ç”¨è„šæœ¬è‡ªåŠ¨æ£€æµ‹å¯ç”¨ç«¯å£
npm run detect-port
```

### **é…ç½®ä¸ä¸€è‡´**
```bash
# æ£€æŸ¥é…ç½®å®Œæ•´æ€§
node scripts/check-config.js

# é‡æ–°ç”Ÿæˆé…ç½®
npm run detect-port
```

### **å‰ç«¯è¿æ¥å¤±è´¥**
```bash
# 1. ç¡®è®¤åç«¯æœåŠ¡è¿è¡Œ
curl http://localhost:9000/health

# 2. æ£€æŸ¥å‰ç«¯é…ç½®
cat frontend/.env.development

# 3. é‡å¯å‰ç«¯æœåŠ¡
cd frontend && npm run dev
```

## ğŸ“Š **ç›‘æ§å’Œæ—¥å¿—**

### **é…ç½®æ£€æŸ¥æŠ¥å‘Š**
è¿è¡Œé…ç½®æ£€æŸ¥åä¼šç”ŸæˆæŠ¥å‘Šï¼š
```json
// config-check-report.json
{
  "timestamp": "2025-06-18T16:41:17.959Z",
  "results": {
    "files": true,
    "json": true,
    "env": true,
    "ports": true
  },
  "recommendations": []
}
```

### **ç«¯å£æ£€æµ‹æŠ¥å‘Š**
è¿è¡Œç«¯å£æ£€æµ‹åä¼šç”ŸæˆæŠ¥å‘Šï¼š
```json
// port-detection-report.json
{
  "timestamp": "2025-06-18T16:41:17.959Z",
  "detectedPort": 9000,
  "checkedPorts": [9000, 8000, 8001, 8080],
  "configFiles": [...]
}
```

## ğŸ¯ **æœ€ä½³å®è·µ**

### **å¼€å‘ç¯å¢ƒ**
1. ä½¿ç”¨ `npm run dev` å¯åŠ¨é¡¹ç›®
2. å®šæœŸè¿è¡Œ `node scripts/check-config.js` æ£€æŸ¥é…ç½®
3. é‡åˆ°ç«¯å£é—®é¢˜æ—¶è¿è¡Œ `npm run detect-port`

### **ç”Ÿäº§ç¯å¢ƒ**
1. ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®ç«¯å£
2. è®¾ç½®å¥åº·æ£€æŸ¥ç›‘æ§
3. ä½¿ç”¨åå‘ä»£ç†ï¼ˆNginxï¼‰

### **å›¢é˜Ÿåä½œ**
1. æäº¤ `.env.example` æ–‡ä»¶
2. ä¸æäº¤ `.env.development` æ–‡ä»¶
3. ä½¿ç”¨ç»Ÿä¸€çš„å¯åŠ¨è„šæœ¬

## ğŸ”„ **è‡ªåŠ¨åŒ–æµç¨‹**

### **å¼€å‘å¯åŠ¨æµç¨‹**
```
npm run dev
â”œâ”€â”€ æ£€æµ‹ç°æœ‰APIæœåŠ¡
â”œâ”€â”€ æŸ¥æ‰¾å¯ç”¨ç«¯å£
â”œâ”€â”€ å¯åŠ¨åç«¯æœåŠ¡ï¼ˆå¦‚éœ€è¦ï¼‰
â”œâ”€â”€ æ›´æ–°å‰ç«¯é…ç½®
â”œâ”€â”€ å¯åŠ¨å‰ç«¯æœåŠ¡
â””â”€â”€ æ˜¾ç¤ºæœåŠ¡åœ°å€
```

### **é…ç½®æ›´æ–°æµç¨‹**
```
npm run detect-port
â”œâ”€â”€ æ£€æµ‹APIç«¯å£
â”œâ”€â”€ æ›´æ–° .env.development
â”œâ”€â”€ æ›´æ–° vite.config.js
â”œâ”€â”€ ç”Ÿæˆæ£€æµ‹æŠ¥å‘Š
â””â”€â”€ æç¤ºé‡å¯æœåŠ¡
```

## ğŸ“ **å¸¸ç”¨å‘½ä»¤**

```bash
# é¡¹ç›®å¯åŠ¨
npm run dev                    # è‡ªåŠ¨å¯åŠ¨å‰åç«¯
npm run start:backend          # åªå¯åŠ¨åç«¯
npm run start:frontend         # åªå¯åŠ¨å‰ç«¯

# é…ç½®ç®¡ç†
npm run detect-port            # æ£€æµ‹å¹¶æ›´æ–°ç«¯å£é…ç½®
node scripts/check-config.js   # æ£€æŸ¥é…ç½®å®Œæ•´æ€§

# ä¾èµ–å®‰è£…
npm run install:all            # å®‰è£…å‰åç«¯ä¾èµ–

# é¡¹ç›®æ„å»º
npm run build                  # æ„å»ºå‰ç«¯é¡¹ç›®
```

## ğŸ‰ **ä¼˜åŠ¿æ€»ç»“**

âœ… **è‡ªåŠ¨åŒ–**ï¼šæ— éœ€æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶
âœ… **æ™ºèƒ½æ£€æµ‹**ï¼šè‡ªåŠ¨å‘ç°å¯ç”¨ç«¯å£
âœ… **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰é…ç½®é›†ä¸­ç®¡ç†
âœ… **é”™è¯¯é¢„é˜²**ï¼šé…ç½®æ£€æŸ¥å’ŒéªŒè¯
âœ… **å›¢é˜Ÿå‹å¥½**ï¼šæ ‡å‡†åŒ–çš„å¯åŠ¨æµç¨‹
âœ… **ç”Ÿäº§å°±ç»ª**ï¼šæ”¯æŒå¤šç¯å¢ƒé…ç½®

é€šè¿‡è¿™å¥—ç«¯å£ç®¡ç†æ–¹æ¡ˆï¼Œå¯ä»¥å½»åº•è§£å†³ç«¯å£å˜åŒ–å¯¼è‡´çš„é…ç½®é—®é¢˜ï¼
